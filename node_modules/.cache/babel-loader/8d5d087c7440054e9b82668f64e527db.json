{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\pingu\\\\Desktop\\\\QSTP\\\\WebD\\\\final_project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\pingu\\\\Desktop\\\\QSTP\\\\WebD\\\\final_project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\pingu\\\\Desktop\\\\QSTP\\\\WebD\\\\final_project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\pingu\\\\Desktop\\\\QSTP\\\\WebD\\\\final_project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\pingu\\\\Desktop\\\\QSTP\\\\WebD\\\\final_project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\pingu\\\\Desktop\\\\QSTP\\\\WebD\\\\final_project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{BrowserRouter as Router,Route}from'react-router-dom';import Blogs from'./components/Blogs';import Pagination from'./components/Pagination';import Admin from'./components/pages/Admin';import NavBar from'./components/NavBar';import BlogData from'./components/pages/BlogData';import axios from'axios';import'./App.css';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={blogs:[],currentPage:1,blogsPerPage:10,totalBlogs:0,loading:false,loadingBlog:false,userName:'',password:'',blogId:0};_this.getAdmin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://blogdatabase0101.herokuapp.com/Login');case 2:res=_context.sent;console.log(res.data);_this.setState({userName:res.data.doc.User,password:res.data.doc.Password});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.getBlogs=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({loading:true});_context2.next=3;return axios.get('https://blogdatabase0101.herokuapp.com/page/'+_this.state.currentPage);case 3:res=_context2.sent;_this.setState({blogs:res.data.blogs,totalBlogs:res.data.count,loading:false});case 5:case\"end\":return _context2.stop();}}},_callee2);}));_this.getBlog=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.setState({loadingBlog:true});_context3.next=3;return axios.get('https://blogdatabase0101.herokuapp.com/'+id);case 3:res=_context3.sent;console.log(\"LLikes=\",res.data.likes);_this.setState({blog:res.data,loadingBlog:false});case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}();_this.paginate=function(pageNumber){_this.setState({currentPage:pageNumber});};_this.setId=function(id){_this.setState({blogId:id});_this.getBlog(id);};_this.setLike=function(like){console.log('Liked');console.log(like);axios.put('https://blogdatabase0101.herokuapp.com/'+_this.state.blogId,[{\"propName\":\"likes\",\"value\":\"\"+like}]).then(function(res){_this.getBlog(_this.state.blogId);});};_this.comment=function(comment){console.log('commented');console.log(comment);axios.put('https://blogdatabase0101.herokuapp.com/'+_this.state.blogId,[{\"propName\":\"comments\",\"value\":{\"value\":\"\"+comment}}]).then(function(res){_this.getBlog(_this.state.blogId);});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.getBlogs();this.getAdmin();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(this.state.currentPage!=prevState.currentPage)this.getBlogs();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(NavBar,null),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-5\"},/*#__PURE__*/React.createElement(Blogs,{blogs:this.state.blogs,loading:this.state.loading,blogId:this.setId}),/*#__PURE__*/React.createElement(Pagination,{blogsPerPage:this.state.blogsPerPage,totalBlogs:this.state.totalBlogs,paginate:this.paginate}))),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/#\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-5\"},/*#__PURE__*/React.createElement(Blogs,{blogs:this.state.blogs,loading:this.state.loading,blogId:this.setId}),/*#__PURE__*/React.createElement(Pagination,{blogsPerPage:this.state.blogsPerPage,totalBlogs:this.state.totalBlogs,paginate:this.paginate}))),/*#__PURE__*/React.createElement(Route,{path:\"/admin/\"},/*#__PURE__*/React.createElement(Admin,{userName:this.state.userName,password:this.state.password})),/*#__PURE__*/React.createElement(Route,{path:\"/blogData\"},/*#__PURE__*/React.createElement(BlogData,{loading:this.state.loadingBlog,blog:this.state.blog,setLike:this.setLike,comment:this.comment,back:this.back})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/pingu/Desktop/QSTP/WebD/final_project/src/App.js"],"names":["React","Component","BrowserRouter","Router","Route","Blogs","Pagination","Admin","NavBar","BlogData","axios","App","state","blogs","currentPage","blogsPerPage","totalBlogs","loading","loadingBlog","userName","password","blogId","getAdmin","get","res","console","log","data","setState","doc","User","Password","getBlogs","count","getBlog","id","likes","blog","paginate","pageNumber","setId","setLike","like","put","then","comment","prevProps","prevState","back"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\nimport Blogs from './components/Blogs';\r\nimport Pagination from './components/Pagination';\r\nimport Admin from './components/pages/Admin';\r\nimport NavBar from './components/NavBar'\r\nimport BlogData from './components/pages/BlogData';\r\nimport axios from 'axios';\r\n\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    blogs: [],\r\n    currentPage: 1,\r\n    blogsPerPage: 10,\r\n    totalBlogs: 0,\r\n    loading: false,\r\n    loadingBlog:false,\r\n    userName: '',\r\n    password: '',\r\n    blogId: 0,\r\n  };\r\n  componentDidMount() {\r\n    this.getBlogs();\r\n    this.getAdmin();\r\n  }\r\n  componentDidUpdate(prevProps, prevState) {    \r\n    if (this.state.currentPage != prevState.currentPage) this.getBlogs();\r\n  }\r\n  getAdmin = async () => {\r\n    let res = await axios.get('https://blogdatabase0101.herokuapp.com/Login');\r\n    console.log(res.data);\r\n    this.setState({\r\n      userName: res.data.doc.User,\r\n      password: res.data.doc.Password,\r\n    });\r\n  };\r\n  getBlogs = async () => {\r\n    this.setState({ loading: true });\r\n    let res = await axios.get(\r\n      'https://blogdatabase0101.herokuapp.com/page/' + this.state.currentPage\r\n    );\r\n    this.setState({\r\n      blogs: res.data.blogs,\r\n      totalBlogs: res.data.count,\r\n      loading: false,\r\n    });\r\n  };\r\n  getBlog = async (id) => {\r\n    this.setState({ loadingBlog: true });\r\n    let res = await axios.get(\r\n      'https://blogdatabase0101.herokuapp.com/' + id\r\n    );\r\n    console.log(\"LLikes=\",res.data.likes)\r\n    this.setState({\r\n      blog: res.data,\r\n      loadingBlog: false,\r\n    });\r\n  };\r\n  paginate = (pageNumber) => {\r\n    this.setState({\r\n      currentPage: pageNumber,\r\n    });\r\n  };\r\n  setId = (id) => {\r\n    this.setState({blogId:id})\r\n    this.getBlog(id);\r\n  };\r\n  setLike = (like) => {\r\n    console.log('Liked')\r\n    console.log(like)\r\n    axios.put('https://blogdatabase0101.herokuapp.com/' + this.state.blogId,[{\"propName\":\"likes\",\"value\":\"\"+like}]).then((res)=>{this.getBlog(this.state.blogId)});    \r\n  }\r\n  comment = (comment) => {\r\n    console.log('commented')\r\n    console.log(comment)\r\n    axios.put('https://blogdatabase0101.herokuapp.com/' + this.state.blogId,[{\"propName\":\"comments\",\"value\":{\"value\":\"\"+comment}}]).then((res)=>{this.getBlog(this.state.blogId)});\r\n  }\r\n  render() {\r\n    return (\r\n      \r\n      <Router>\r\n      <NavBar></NavBar>\r\n        <Route exact path=\"/\">\r\n          <div className=\"container mt-5\">\r\n            <Blogs\r\n              blogs={this.state.blogs}\r\n              loading={this.state.loading}\r\n              blogId={this.setId}\r\n            />\r\n            <Pagination\r\n              blogsPerPage={this.state.blogsPerPage}\r\n              totalBlogs={this.state.totalBlogs}\r\n              paginate={this.paginate}\r\n            />\r\n          </div>\r\n        </Route>\r\n        <Route exact path=\"/#\">\r\n          <div className=\"container mt-5\">\r\n            <Blogs\r\n              blogs={this.state.blogs}\r\n              loading={this.state.loading}\r\n              blogId={this.setId}\r\n            />\r\n            <Pagination\r\n              blogsPerPage={this.state.blogsPerPage}\r\n              totalBlogs={this.state.totalBlogs}\r\n              paginate={this.paginate}\r\n            />\r\n          </div>\r\n        </Route>\r\n        <Route path=\"/admin/\">\r\n          <Admin\r\n            userName={this.state.userName}\r\n            password={this.state.password}\r\n          />\r\n        </Route>\r\n        <Route path=\"/blogData\">\r\n          <BlogData \r\n              loading={this.state.loadingBlog}\r\n              blog={this.state.blog}\r\n              setLike={this.setLike}\r\n              comment={this.comment}\r\n              back={this.back}/>\r\n        </Route>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}